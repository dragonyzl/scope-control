#!/bin/bash
DOTSLASH=./

#
# Edit the following lines to reflect your circumstances
#
if [ X$LOCATION = 'X' ]; then
	LOCATION="HOME";
fi

case "$LOCATION" in
HOME)
	ZONE="-5"
	LATITUDE="45 24 50"
	LONGITUDE="-75 42 24"
	;;
MDH)
	ZONE="-5"
	LATITUDE="45 24 16"
	LONGITUDE="-75 43 19"
	;;
FOCUS_SCIENTIFIC)
	ZONE="-5"
	LATITUDE="45 23 45"
	LONGITUDE="-75 42 44"
	;;
*)
	echo Unknown location \`$LOCATION\'
	exit -1
	;;
esac
DEVICE=/dev/ttyUSB0

#
# DO NOT EDIT BEYOND THIS LINE
#
if [ $(( $ZONE == $(date +%:::z)  )) ]; then
	SUMMERTIME=0
else
	SUMMERTIME=1
fi

if [ X"$1" != "Xget" ]; then
DATE=$(date "+%H %M %S %m %d %y $ZONE $SUMMERTIME")
echo -e Setting telescope parameters \\n\\tdate/time: $DATE lat: $LATITUDE long: $LONGITUDE
DATE=localtime
echo Using computer clock synchronization
${DOTSLASH}scope-control \
				--device="$DEVICE" \
				--settime="$DATE" \
				--setlocation="$LATITUDE $LONGITUDE"
fi

if [ X"$1" == "Xget" ]; then
echo Verifying telescope parameters
${DOTSLASH}scope-control \
				--device="$DEVICE" \
				--getmodel \
				--getversion \
				--deviceversion "AZM/RA Motor" \
				--deviceversion "ALT/DEC Motor" \
				--gettime \
				--getlocation \
				--gettracking \
				--precise-getra --precise-getazalt \
				--isalignmentcomplete \
				--isgotoinprogress
fi
